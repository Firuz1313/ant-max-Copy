# Конструктор интерфейса ТВ - Руководство пользователя

## Обзор

Конструктор интерфейса ТВ позволяет создавать кастомные интерфейсы для ТВ-приставок, которые будут отображаться на странице диагностики вместо стандартных экранов.

## Основные возможности

### ✅ Реализовано

1. **Создание TV интерфейсов**
   - Выбор приставки из доступных устройств
   - Загрузка скр��ншотов интерфейса (до 5 МБ)
   - Добавление названия и описания
   - Валидация данных

2. **Управление интерфейсами**
   - Просмотр всех созданных интерфейсов
   - Редактирование существующих интерфейсов
   - Активация/деактивация интерфейсов
   - Удаление ненужных интерфейсов

3. **Фильтрация и поиск**
   - Поиск по названию, описанию, устройству
   - Фильтрация по устройствам
   - Отображение статуса активности

4. **Интеграция с диагностикой**
   - Автоматическое отображение на странице диагностики
   - Fallback на стандартные экраны
   - Поддержка существующего API

5. **Mock API система**
   - Полная имитация backend API
   - Персистентность данных в localStorage
   - Валидация и обработка ошибок

## Как использовать

### 1. Создание нового интерфейса

1. Перейдит�� в **Админ-панель** → **Конструктор интерфейса ТВ**
2. Нажмите кнопку **"Создать интерфейс"**
3. Заполните обязательные поля:
   - **Название** - краткое описание интерфейса
   - **Устройство** - выберите из списка доступных приставок
4. Опционально добавьте:
   - **Описание** - подробное описание интерфейса
   - **Скриншот** - изображение интерфейса (JPG, PNG, GIF до 5 МБ)
5. Нажмите **"Создать"**

### 2. Редактирование интерфейса

1. В списке интерфейсов найдите нужный
2. Нажмите кнопку редактирования (иконка карандаша)
3. Измените необходимые поля
4. Нажмите **"Сохранить"**

### 3. Управление статусом

- **Активация/деактивация**: нажмите кнопку включения/выключения
- **Удаление**: нажмите кнопку корзины и подтвердите удаление

### 4. Просмотр на странице диа��ностики

1. Перейдите на страницу диагностики для устройства
2. Если для устройства есть активный интерфейс со скриншотом:
   - Отобразится загруженное изображение
   - В углу будет показано название интерфейса
3. Если интерфейса нет - отобразится стандартный экран

### 5. Тестирование интерфейсов

Для тестирования доступна специальная страница:
- URL: `/tv-interface-demo`
- Позволяет выбрать устройство и увидеть, как будет выглядеть интерфейс
- Показывает информацию о найденных интерфейсах

## Технические детали

### Поддерживаемые форматы изображений
- JPG/JPEG
- PNG
- GIF
- Максимальный размер: 5 МБ

### Хранение данных
- В текущей версии данные сохраняются в localStorage браузера
- При внедрении backend API данные будут храниться на сервере

### API эндпо��нты (для будущего внедрения)
```
GET    /api/v1/tv-interfaces          - Получить все интерфейсы
GET    /api/v1/tv-interfaces/:id      - Получить интерфейс по ID
GET    /api/v1/tv-interfaces/device/:deviceId - Интерфейсы по устройству
POST   /api/v1/tv-interfaces          - Создать интерфейс
PUT    /api/v1/tv-interfaces/:id      - Обновить интерфейс
DELETE /api/v1/tv-interfaces/:id      - Удалить интерфейс
PATCH  /api/v1/tv-interfaces/:id/toggle - Активировать/деактивировать
```

### Типы данных
```typescript
interface TVInterface {
  id: string;
  name: string;
  description: string;
  deviceId: string;
  screenshotData?: string; // base64
  isActive: boolean;
  createdAt: string;
  updatedAt: string;
}
```

## Структура файлов

```
frontend/src/
├── api/
│   └── tvInterfaces.ts           # Mock API для TV интерфейсов
├── components/
│   └── TVDisplay.tsx             # Компонент отображения ТВ
├── pages/
│   ├── admin/
│   │   └── TVInterfaceBuilder.tsx # Страница конструктора
│   ├── DiagnosticPage.tsx        # Обновлена для интеграции
│   └── TVInterfaceDemo.tsx       # Демо страница
├── types/
│   └── tvInterface.ts            # Типы для TV интерфейсов
└── ...
```

## Следующие шаги для внедрения backend API

1. **Создание базы данных**
   - Таблица `tv_interfaces` с полями из TypeScript интерфейса
   - Связь с таблицей `devices`

2. **Backend API**
   - Контроллеры для CRUD операций
   - Валидация данных
   - Обработка загрузки изображений

3. **Миграция данных**
   - Скрипт для переноса данных из localStorage в БД
   - Обновление frontend API для работы с real backend

4. **Дополнительные возможности**
   - Интерактивные области на скриншотах
   - Версионирование интерфейсов
   - Импорт/экспорт интерфейсов
   - Аналитика использования

## Поддержка

При возникновении проблем или вопросов:
1. Проверьте консол�� браузера на наличие ошибок
2. Убедитесь, что файлы изображений соответствуют требованиям
3. Попробуйте обновить страницу или очистить localStorage

## Changelog

**v1.0.0** (Текущая версия)
- ✅ Полная CRUD функциональность для TV интерфейсов
- ✅ Интеграция с конструктором устройств
- ✅ Загрузка и отображение скриншотов
- ✅ Mock API с localStorage
- ✅ Интеграция со страницей диагностики
- ✅ Система фильтрации и поиска
- ✅ Responsive дизайн
